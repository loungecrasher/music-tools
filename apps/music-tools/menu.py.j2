#!/usr/bin/env python3
import os
import subprocess

TOOLS_DIR = os.path.dirname(os.path.realpath(__file__))


def run_tool(script):
    """Execute a tool script with Python 3"""
    try:
        subprocess.run(["python3", os.path.join(TOOLS_DIR, script)], check=True)
    except subprocess.CalledProcessError as e:
        print(f"\nError running tool: {e}")
    except FileNotFoundError:
        print(f"\nTool script not found: {script}")


def main_menu():
    while True:
        print("\n=== Music Tools Unified Menu ===")
        print("1. Deezer Playlist Repair")
        print("2. Soundiz File Processor")
        print("3. Spotify Tracks After Date")
        print("4. Spotify Playlist Manager")
        print("5. Exit")

        choice = input("\nEnter choice (1-5): ").strip()

        if choice == '1':
            run_tool("roles/deezer/main.py")
        elif choice == '2':
            run_tool("roles/soundiz/main.py")
        elif choice == '3':
            run_tool("roles/spotify/main.py")
        elif choice == '4':
            run_tool("roles/spotify/main.py")  # Assuming same manager for both Spotify tools
        elif choice == '5':
            print("\nExiting Music Tools...")
            break
        else:
            print("\nInvalid choice. Please enter 1-5.")


if __name__ == "__main__":
    main_menu()
