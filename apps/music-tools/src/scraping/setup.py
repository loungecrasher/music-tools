# !/usr/bin/env python3\n\"\"\"\nSetup script for EDM Music Blog Scraper\nHelps users install dependencies and verify the installation.\n\"\"\"\n\nimport sys\nimport subprocess\nimport os\nfrom pathlib import Path\n\ndef check_python_version():\n    \"\"\"Check if Python version is compatible.\"\"\"\n    print(\"üêç Checking Python version...\")\n    \n    if sys.version_info < (3, 7):\n        print(f\"‚ùå Error: Python 3.7 or higher is required\")\n        print(f\"   Current version: {sys.version}\")\n        return False\n    \n    print(f\"‚úÖ Python version: {sys.version.split()[0]}\")\n    return True\n\ndef install_requirements():\n    \"\"\"Install required packages.\"\"\"\n    print(\"\\nüì¶ Installing requirements...\")\n    \n    requirements_file = Path(\"requirements.txt\")\n    if not requirements_file.exists():\n        print(\"‚ùå requirements.txt not found\")\n        return False\n    \n    try:\n        subprocess.run([sys.executable, \"-m\", \"pip\", \"install\", \"-r\", \"requirements.txt\"], \n                      check=True, capture_output=True, text=True)\n        print(\"‚úÖ Requirements installed successfully\")\n        return True\n    except subprocess.CalledProcessError as e:\n        print(f\"‚ùå Failed to install requirements: {e}\")\n        print(\"üí° Try running: pip3 install --user -r requirements.txt\")\n        return False\n\ndef test_imports():\n    \"\"\"Test if all required modules can be imported.\"\"\"\n    print(\"\\nüß™ Testing imports...\")\n    \n    required_modules = [\n        ('requests', 'HTTP requests'),\n        ('bs4', 'HTML parsing'),\n        ('lxml', 'XML parsing'),\n    ]\n    \n    optional_modules = [\n        ('colorama', 'Colored terminal output'),\n        ('dateutil', 'Enhanced date parsing'),\n    ]\n    \n    all_good = True\n    \n    for module, description in required_modules:\n        try:\n            __import__(module)\n            print(f\"‚úÖ {module} - {description}\")\n        except ImportError:\n            print(f\"‚ùå {module} - {description}\")\n            all_good = False\n    \n    for module, description in optional_modules:\n        try:\n            __import__(module)\n            print(f\"‚úÖ {module} - {description} (optional)\")\n        except ImportError:\n            print(f\"‚ö†Ô∏è  {module} - {description} (optional, recommended)\")\n    \n    return all_good\n\ndef test_application():\n    \"\"\"Test if the application modules can be imported.\"\"\"\n    print(\"\\nüéµ Testing application modules...\")\n    \n    try:\n        from music_scraper import MusicBlogScraper\n        print(\"‚úÖ music_scraper module\")\n    except ImportError as e:\n        print(f\"‚ùå music_scraper module: {e}\")\n        return False\n    \n    try:\n        from cli_scraper import EDMScraperCLI\n        print(\"‚úÖ cli_scraper module\")\n    except ImportError as e:\n        print(f\"‚ùå cli_scraper module: {e}\")\n        return False\n    \n    try:\n        from preferred_genres_scraper import PreferredGenresScraper\n        print(\"‚úÖ preferred_genres_scraper module\")\n    except ImportError as e:\n        print(f\"‚ùå preferred_genres_scraper module: {e}\")\n        return False\n    \n    return True\n\ndef run_basic_test():\n    \"\"\"Run a basic functionality test.\"\"\"\n    print(\"\\nüîß Running basic functionality test...\")\n    \n    try:\n        from music_scraper import MusicBlogScraper\n        \n        # Test basic initialization\n        scraper = MusicBlogScraper(\"https://example.com\", \"test_output.txt\")\n        \n        # Test genre extraction\n        genres = scraper.extract_genres_from_text(\"progressive house melodic indie dance\")\n        if len(genres) == 0:\n            print(\"‚ùå Genre extraction test failed\")\n            return False\n        \n        # Test date parsing\n        test_date = scraper.parse_date_string(\"2024-01-15\")\n        if test_date is None:\n            print(\"‚ùå Date parsing test failed\")\n            return False\n        \n        print(\"‚úÖ Basic functionality test passed\")\n        return True\n        \n    except Exception as e:\n        print(f\"‚ùå Basic functionality test failed: {e}\")\n        return False\n\ndef create_example_config():\n    \"\"\"Create an example configuration file.\"\"\"\n    print(\"\\nüìÑ Creating example files...\")\n    \n    example_usage = \"\"\"#!/usr/bin/env python3\n'''\nExample usage of EDM Music Blog Scraper\n'''\n\nfrom music_scraper import MusicBlogScraper\n\ndef main():\n    # Create scraper instance\n    scraper = MusicBlogScraper(\"https://sharing-db.club\", \"example_output.txt\")\n    \n    # Find blog posts\n    post_urls = scraper.find_blog_posts(max_pages=5)\n    print(f\"Found {len(post_urls)} posts\")\n    \n    # Filter by preferred genres\n    preferred_genres = ['house', 'progressive house', 'melodic', 'indie dance']\n    matching_posts = scraper.filter_posts_by_genre(post_urls, preferred_genres)\n    \n    # Save results\n    scraper.save_results(matching_posts)\n    print(f\"Found {len(matching_posts)} matching posts\")\n\nif __name__ == \"__main__\":\n    main()\n\"\"\"\n    \n    try:\n        with open(\"example_usage.py\", \"w\") as f:\n            f.write(example_usage)\n        print(\"‚úÖ Created example_usage.py\")\n    except Exception as e:\n        print(f\"‚ö†Ô∏è  Could not create example_usage.py: {e}\")\n\ndef main():\n    \"\"\"Main setup function.\"\"\"\n    print(\"üéµ EDM Music Blog Scraper - Setup\")\n    print(\"=\" * 50)\n    \n    success = True\n    \n    # Check Python version\n    if not check_python_version():\n        success = False\n    \n    # Install requirements\n    if success and not install_requirements():\n        success = False\n    \n    # Test imports\n    if success and not test_imports():\n        success = False\n    \n    # Test application modules\n    if success and not test_application():\n        success = False\n    \n    # Run basic test\n    if success and not run_basic_test():\n        success = False\n    \n    # Create example files\n    create_example_config()\n    \n    print(f\"\\n{'=' * 50}\")\n    \n    if success:\n        print(\"üéâ Setup completed successfully!\")\n        print(\"\\nüöÄ Quick Start:\")\n        print(\"  1. Run the interactive CLI: python3 cli_scraper.py\")\n        print(\"  2. Or use the launcher: python3 run_scraper.py\")\n        print(\"  3. Check example_usage.py for code examples\")\n        print(\"\\nüìö Documentation:\")\n        print(\"  ‚Ä¢ README.md - Main documentation\")\n        print(\"  ‚Ä¢ CLI_README.md - CLI-specific help\")\n    else:\n        print(\"‚ùå Setup encountered issues.\")\n        print(\"\\nüîß Troubleshooting:\")\n        print(\"  ‚Ä¢ Make sure you have Python 3.7+\")\n        print(\"  ‚Ä¢ Try: pip3 install --user -r requirements.txt\")\n        print(\"  ‚Ä¢ Check that all files are in the same directory\")\n    \n    return success\n\nif __name__ == \"__main__\":\n    success = main()\n    sys.exit(0 if success else 1)\n
